Add generate d.ts and add typing